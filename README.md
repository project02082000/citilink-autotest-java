# citilink-autotests
citilink-autotest - это тестовый фреймворк для авто-тестирования сайта “Citilink” на основе фреймворка Selenium (Java).

## Особенности 
Проект сделан на основе фреймворка Selenium на языке Java и представляет собой совокупность файлов, которые разделены по следующим директориям:         
- директория pages с классами страниц
- отдельно стоящий класс E2ETest
- отдельно стоящий класс ModuleTest

### pages
В директории pages располагаются классы MainPage, LaptopsPage, ProductPage, CartPage, CheckoutPage и ShopChoicePage соответственно.

Каждый из этих классов соответствует определенной странице, которую открывает пользователь на пути к оформлению заказа. У каждой страницы имеются свои уникальные локаторы, методы, действия, переменные и т.д.


Всего классы директории pages имеют 4 типа данных:
- Переменные
- Локаторы (Locators)
- Действия (Actions)
- Методы (Methods)

Разберем каждый поподробнее, взяв для примера класс **MainPage**.

1. **Переменные** (например, цена ноутбука - laptop_price)

2. **Локаторы** (Locators)  
    Локатор представляет собой адрес элемента на экране, например:
    ```
    @FindBy(xpath = "//button[@data-meta-name='DesktopHeaderFixed__catalog-menu']")
    private WebElement btnCatalog;
    ```
    Данный локатор является адресом кнопки “Каталог” на главной странице сайта Citilink.

3. **Действия** (Actions)  
    Actions представляют собой простейшие действия, которые можно сделать с элементом, например, кликнуть на него, навести курсор мыши, вернуть значение текста и т.д. 
    ```
    public void clickCatalog() {
        WebDriverWait wait = new WebDriverWait(driver, 10);
        wait.until(ExpectedConditions.visibilityOf(btnCatalog));
        btnCatalog.click();
    }
    ```
    Например, в данном случае мы вызываем геттер кнопки “Каталог” и выполняем клик. В большинстве действий также используется явное ожидание элемента.

4. **Методы** (Methods)  
    Методы в данном проекте чаще всего представляют собой совокупность действий (Actions). Например:
    ```
    public void chooseLaptopsSection(){
        step("Choose section with laptops");
        clickCatalog();
        moveToLaptopsPc();
        clickLaptops();
    }
    ```
    Метод “chooseLaptopsSection” состоит из действий “clickCatalog” (клик по кнопке Каталог), “ moveToLaptopsPc” (наводка курсора мыши на элемент “Ноутбуки и ПК”) и  “clickLaptops” (клик по кнопке Ноутбуки). Каждое Actions в свою очередь выполняет простейшие действия над определенным элементом.

### E2ETest
В данном классе в виде функции расположен один системный тест:  

1. **testBuyProduct**  
Данный тест эмулирует действия пользователя по покупке товара. Программа открывает сайт Citilink в браузере Chrome, заходит в каталог, выбирает раздел с ноутбуками, устанавливает различные фильтры (процессор, сортировку по отзывам, диапазон цены и т.д.). Затем она кладет первый подходящий по характеристикам ноутбук в корзину и оформляет заказ, заполняя поля с личными данными и выбирая пункт самовывоза. Весь процесс полностью автоматизирован.
В данном тесте проверки (assert) проводятся на разных этапах: например, на этапе нахождения на странице с выбранным ноутбуком (ProductPage) его название и цена сохраняются в соответствующие переменные, которые потом сравниваются с таковыми на этапах корзины (CartPage) и этапе оформления заказа (CheckoutPage). Также в самом конце теста сравнивается итоговая сумма заказа с ценой продукта (т.к. никаких доп.услуг не покупалась, их цена должна совпадать)

### ModuleTest

В данной директории расположены модульные тесты:
- testPriceWhenAdditionalServiceAdded
- testPriceWhenMultipleCopiesOfProductAdded 

Рассмотрим подробнее каждый из тестов:

1. **testPriceWhenAdditionalServiceAdded**  
В данном тесте проверяется правильность подсчета суммы заказа при выборе дополнительных услуг. На этапе нахождения в корзине выбирается 1-я добавочная услуга и выполняется assert – совпадает ли итоговая сумма заказа с ценой ноутбука + цена добавочной услуги? Если да – тест считается выполненным успешно

2. **testPriceWhenMultipleCopiesOfProductAdded**  
В данном тесте проверяется правильность подсчета суммы заказа при выборе нескольких (2-10, выбирается рандомно) одинаковых товаров. По сути, производится подсчет – равна ли итоговая сумма заказа стоимости одного товара, умноженного на кол-во товара? Если да – тест считается пройденным.

## Getting started

Для запуска проекта требуется:
1. Выполнить clone проекта
2. Скачать драйвер для текущей версии вашего браузера Chrome по ссылке https://chromedriver.chromium.org/
3. Распаковать данный драйвер в директорию проекта вашей IDE
4. Запустить любой из тестов на выбор
